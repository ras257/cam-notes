\documentclass[../main.tex]{subfiles}
\begin{document}
\chapter{Elementary Number Theory}
\section{Primes}
\begin{definition}[Divisibility]
  Give $a, b \in \Z$, we say that ``a divides b'' if $\exists c \in \Z$ such that $b = ac$.
  We might also say that ``$a$ is a divisor of b'', ``$a$ is a factor of $b$'' or ``$b$ is a multiple of $a$''.
  We denote this $a \mid b$.
\end{definition}
For any $b \in \Z$, $\pm1$ and $\pm b$ are always factors.
All other factors of $b$ are called \textit{proper factors} (or \textit{non-trivial}).
\begin{definition}[Prime Number]
  A natural number $n \geq 2$ is \textit{prime} if it has no proper factors, that is, its only factors are $\pm 1$ and $\pm n$.
  If $n \geq 2$ is not prime then it is \textit{composite}.
\end{definition}
\begin{proposition}
  Every natural number $n \geq 2$ can be written as a product of primes.
  \label{prodPrimes}
\end{proposition}
\begin{proof}
  \induction
  {$n = 2$}{
    Clearly true for $2$ as $2$ is prime.
  }
  {$n < k$}{}
  {$n = k$}{
     If $k$ itself is prime then we are done.

     Otherwise, if $k$ is composite we can write $k = ab$ with $1 < a, b < k$.
     Then by the hypothesis, $a$ and $b$ can be written as a product of primes.
     Thus since $k$ is a product of $a$ and $b$, it can also be written as a product of primes.
  }
\end{proof}
\begin{theorem}[Infinity of Primes]
  There are infinitely many primes.
  \label{infinityPrimes}
\end{theorem}
\begin{proof}[Euclid]
  Suppose there are finitely many primes, say: $p_1, p_2, \ldots, p_n$. Consider:
  \[
    N = p_1 p_2 \cdots p_n + 1
  \]
  Then we see that $p_1 \nmid N$ else $p_1 \mid (N - p_1 p_2 \cdots p_n) = 1$.
  By the same argument none of the other primes divide $N$.
  This contradicts the fact that $N$ can be written as a product of primes (See \cref{prodPrimes}).
\end{proof}
\begin{remark}[Note]
  We are not claiming that $N$ is prime here, just that it cannot be written as a product of primes.
\end{remark}
We do not currently know if a number's prime factorisation is unique.
To prove that a number's prime factorisation is unique, we need to introduce a few other things.
\begin{definition}[Highest Common Factor]
  Given $a, b \in \N$, we say that $c \in \N$ is the \textit{highest common factor} ($\hcf$) or \textit{greatest common divisor} ($\gcd$) of $a$ and $b$ if:
  \begin{enumerate}
    \item $c \mid a$ and $c \mid b$ ($c$ is a common divisor of $a$ and $b$).
    \item $d \mid a$ and $d \mid b$ then $d \mid c$ (Every common divisor of $a$ and $b$ divides $c$).
  \end{enumerate}
  We denote this $c = \hcf(a, b) = \gcd(a, b)$.
\end{definition}
\begin{example}
  The factors of $12$ are $1, 2, 3, 4, 6, 12$. The factors of $18$ are $1, 2, 3, 6, 9, 18$.
  So the common factors are $1, 2, 3, 6$.
  Hence $\hcf(12, 18) = 6$.
\end{example}
We now need to show that that $\hcf(a, b)$ always exists.
\section{Euclid's Algorithm}
\begin{proposition}[Division Algorithm]
  Let $n, k \in \N$.
  Then we can write $n = qk + r$ for some $q, r \in \Z$ and $0 \leq r \leq k - 1$.
\end{proposition}
\begin{remark}[Notation]
  We use ``$q$'' to mean \textit{quotient} and ``$r$'' to mean \textit{remainder}.
\end{remark}
\begin{proof}
  \induction
  {$n = 1$}{
    If $k = 1$ then $q = 1$ and $r = 0$, if $k > 1$ then $q = 0$ and $r = 1$
  }
  {$n = p - 1$}{
    So $p - 1= qk + r$ with $0 \leq r \leq k-1$.
  }
  {$n = p$}{
    \begin{proofcases}
      \begin{case}{$r < k - 1$}
        Then $p = qk + (r + 1)$ and $0 < r + 1 < k$ which is in the correct form.
      \end{case}
      \begin{case}{$r = k - 1$}
        Then $p = qk + k = k(q + 1) + 0$ which is in the correct form.
      \end{case}
    \end{proofcases}
  }
\end{proof}
\begin{remark}
  The quotient and remainder obtained for each $n$ are unique.
\end{remark}
\begin{proof}
  Suppose we have $n = qk + r = q' k + r'$, then $(q - q')k = r' - r$.
  Since $0 \leq r, r' \leq k -1$, we have $-k < r' - r < k$.
  The LHS is a multiple of $k$ so we must have $r - r' = 0$ and $q - q' = 0$.
  Thus $r = r'$ and $q = q'$ so the quotient and remainder are unique.
\end{proof}
Euclid's algorithm is a method to find the highest common factor of a number.
We repeatedly apply the division algorithm until we get a remainder of 0.
\begin{center}
\begin{tabular}{c|c|c|c}
  Step & Generic form (a,b) & Bound on $r_{i}$ & Example (534, 372) \\
\hline
1 & $a = q_1 b + r_1$ & $0 \leq r_1 \leq b-1$ & $534 = 1(372) + 162$ \\
2 & $b = q_2 r_1 + r_2$ & $0 \leq r_2 \leq r_1 - 1$ & $372 = 2(162) + 48$ \\
3 & $r_1 = q_3 r_2 + r_3$ & $0 \leq r_3 \leq r_2 - 1$ &$162 = 3(48) + 18$ \\
$\cdots$ & $\cdots$ & $\cdots$ &$48 = 2(18) + 12$ \\
$n$ & $r_{n-2} = q_n r_{n-1} + r_n$ & $0 \leq r_n \leq r_{n-1} - 1$&$18 = 1(12) + 6$ \\
n + 1 & $r_{n-1} = q_{n+1} r_n + 0$ & $r_{n + 1} = 0$ &$12 = 2(6) + 0$ \\
\hline
Output & $r_n$& -- & 6 \\
\end{tabular}
\end{center}
\begin{remark}[Note]
  The algorithm terminates in $n < b$ steps since $b > r_1 > r_2 > \cdots > r_n > 0$.
\end{remark}
\begin{theorem}
  The output of Euclid's algorithm with input $a, b$ is $\hcf(a, b)$.
\end{theorem}
\begin{proof}
  We need to show that $r_n$ satisfies both conditions to be $\hcf(a, b)$.
  \begin{enumerate}
    \item We have $r_n \mid r_{n - 1}$ (as $r_{n + 1} = 0$).
      So by induction:
      \begin{center}
      \begin{tabular}{c|c|c|c|c|c|c}
        Step & $n + 1$ & $n$ & $\cdots$ & 3 & 2 & 1 \\
        \hline
        Conclusion & $r_n \mid r_{n - 1}$ & $r_n \mid r_{n-2}$ & $\cdots$ & $r_n \mid r_1$ & $r_n \mid b$ & $r_n \mid a$
      \end{tabular}
      \end{center}
      Hence $r_n \mid b$ and $r_n \mid a$.
    \item Given $d$ such that $d \mid a$ and $d \mid b$.
      So $d \mid r_1$ and therefore, by induction:
      \begin{center}
      \begin{tabular}{c|c|c|c|c|c|c}
        Step & 1 & 2 & 3 & $\cdots$ & $n - 1$ & $n$ \\
        \hline
        Conclusion & $d \mid r_1$ & $d \mid r_2$ & $d \mid r_3$ & $\cdots$ & $d \mid r_{n - 1}$ & $d \mid r_n$
      \end{tabular}
      \end{center}
      Hence $d \mid r_n$.
  \end{enumerate}
  Therefore $r_n$ satisfies both conditions to be $\hcf(a, b)$.
\end{proof}
\begin{example}
  Suppose we want $\hcf(87, 52)$, we use Euclid's algorithm:
  \begin{center}
  \begin{tabular}{c|c}
  Step & Calculation \\
  \hline
  1 & $87 = 1 \cdot 52 + 35$ \\
  2 & $52 = 1 \cdot 35 + 17$ \\
  3 & $35 = 2 \cdot 17 + 1$ \\
  4 & $17 = 17 \cdot 1 + 0$
  \end{tabular}
  \end{center}
  As $1$ is the last non-zero remainder, $\hcf(87, 52) = 1$.
\end{example}
\begin{definition}[Coprime]
  If $\hcf(a, b) = 1$ then $a$ and $b$ are \textit{coprime} or \textit{relatively prime}.
\end{definition}
If we reverse Euclid's algorithm we can get a linear combination of $a$ and $b$ that equals $\hcf(a, b)$.
\begin{example}
  For example:
  \begin{align*}
    1 &= 35 - 2 \cdot 17 \\
      &= 35 - 2(52 - 35) \\
      &= -2 \cdot 52 + 3 \cdot 35 \\
      &= -2 \cdot 52 + 3(87 - 52) \\
      &= -5 \cdot 52 + 3 \cdot 87
  \end{align*}
\end{example}
\begin{theorem}[B\'ezout's Identity]
  For all $a, b \in \N$, there exists $x, y \in \Z$ such that
  \[
    xa + yb = \hcf(a, b)
    \label{bezoutsIdentity}
  \]
\end{theorem}
\begin{proof}[Using Euclid's Algorithm -- Constructive]
  We run Euclid's algorithm within inputs $a, b$ to obtain the output $r_n$.
  At step $n$ we have $r_n = xr_{n-1} + yr_{n-2}$ for some $x, y \in \Z$.
  But at step $n-1$ we see that $r_{n-1}$ is also expressible as $r_{n-1} = xr_{n-2} + yr_{n-3}$ for some $x, y \in \Z$.
  We can combine these to get:
  \[
    r_{n} = xr_{n-2} + yr_{n-3} \text{ for some }x, y \in \Z
  \]
  We can continue this inductively.
  Therefore for $\forall i = 1, \ldots, n-1$:
  \[
    r_n = xr_i + yr_{i-1} \text{ for some }x, y \in \Z
  \]
  Thus $r_n = xa + yb$ for some $x, y \in \Z$ by steps 1 and 2.
\end{proof}
\begin{remark}
  Euclid's algorithm not only proves the existence of $x, y \in \Z$ but it gives a quick way to find them.
  This is an example of a \textit{constructive} proof.
\end{remark}
\begin{proof}[Existence Proof]
  Let $h$ be the least positive linear combination of $a$ and $b$.
  That is, $h$ is the least positive integer of the form $xa + yb$ for some $x, y \in \Z$.

  We now want to show that $h = \hcf(a, b)$.
  \begin{enumerate}
    \item Suppose $h \nmid a$. Then by the division algorithm we can write $a = qh + r$ for $q, r \in \Z$, with $0 < r < h$.
      Hence $r = a - qh = a - q(xa + yb) = a(1-qx) - qyb$ so $r$ is also a positive linear combination of $a$ and $b$ but $r < h$ which contradicts the definition of $h$.
      So $h \mid a$.
      We can then do the same thing with $b$ to get $h \mid b$.
    \item Given a $d$ such that $d \mid a$ and $d \mid b$, we have $d \mid ax + by,\ \forall x, y \in \Z$.
      So in particular, $d \mid h$.
  \end{enumerate}
  So $h = \hcf(a, b)$.
\end{proof}
\begin{remark}
  This existence proof tells us that such coefficients exists but does not give us a way to find them.
\end{remark}
\begin{corollary}[B\'ezout's Identity Continued]
  For all $a, b \in \N$, the equation:
  \[
    ax + by = c
  \]
  has a solution for $x, y \in \Z$ if and only if $\hcf(a, b) | c$.
\end{corollary}
\begin{proof}
  Let $h = \hcf(a, b)$.
  \begin{proofdirection}{Assume there is a solution}
    So there are $x, y \in \Z$ such that $ax + by = c$.
    Then since $h \mid a$ and $h \mid b$, $h \mid c$.
  \end{proofdirection}
  \begin{proofdirection}{Assume $h \mid c$}
    Then by \cref{bezoutsIdentity}, we know that there exists $x, y \in \Z$ such that $h = ax + by$.
    But then we can rewrite:
    \[
      c = \frac{c}{h} \cdot h = a \left(x \cdot \frac{c}{h}\right) + b \left(y \cdot \frac{c}{h}\right)
    \]
    $h \mid c$ so $\frac{c}{h} \in \Z$, thus $x' = x \cdot \frac{c}{h}, y' = y \cdot \frac{c}{h}$ is an integer solution.
  \end{proofdirection}
\end{proof}
\section{Fundamental Theorem of Arithmetic}
\begin{proposition}[Euclid's Lemma]
  If $p$ is \textbf{prime} and $p \mid ab$ then $p \mid a$ or $p \mid b$.
\end{proposition}
\begin{proof}
  Suppose $p \mid ab$ but $p \nmid a$. We now want to prove that $p \mid b$.
  Since $p$ is prime and $p \nmid a$ we must have $\hcf(a, p) = 1$.
  Applying B\'ezout's Identity, $\exists x, y \in \Z$ such that $xp + ya = 1$.
  We now multiply the equation by $b$ to get $p(xb) + ab(y) = b$.
  Since $p \mid ab$, $p \mid b$.

  The same argument works if we suppose $p \nmid b$.
  Therefore we cannot have a case where $p \nmid a$ and $p \nmid b$.
  Thus $p \mid a$ or $p \mid b$.
\end{proof}
\begin{remark}
  Similarly, by induction, if $p \mid a_1 a_2 \ldots a_n$, then $p \mid a_i$  for some $i = 1, 2, \ldots, n$.
\end{remark}
\begin{theorem}[Fundemental Theorem of Arithmetic]
  Every natural number $n \geq 2$ is expressible as a product of primes, uniquely up to reordering.
\end{theorem}
\begin{proof}
  The existence of such a factorisation follows from \cref{prodPrimes}\par
  \induction
  {$n = 2$}{
    Clearly true as 2 itself is prime.
  }
  {$n < k$}{
    So all $n < k$ have a unique (up to reordering) prime factorisation.
  }
  {$n = k$}{
    Suppose $k = p_1 p_2 \cdots p_m = q_1 q_2 \cdots q_l$ where $p_i, q_i$ are all prime.
    We have that $p_1 \mid n$ so $p_1 \mid q_1 q_2 \cdots q_l$ so by the previous proposition $p_1 | q_i$ for some $i$.
    WLOG we can relabel the $q_j$, so we may assume that $p_1 \mid q_1$.
    But since $p_1$ and $q_1$ are prime, we must have $p_1 = q_1$.

    Therefore:
    \[
      \frac{k}{p_1} = p_2 p_3\cdots p_m = q_2 q_3 \cdots q_l
    \]
    But because $p_1 \geq 2$, $\frac{k}{p_1} < k$ so by the induction hypothesis, $p_2 p_3 \cdots p_m$ and $q_2 q_3 \cdots q_l$ must be the same prime factorisation.
    Thus $m=l$ and after reordering $p_2 = q_2, \cdots, p_k = q_k$.
    So $k$ has a unique prime factorisation.
  }
\end{proof}
We can now use this to provide an alternative proof of \cref{infinityPrimes}.
\begin{proof}[Erd\H{o}s 1930]

\end{proof}
\end{document}
